# Cuggu MVP 개발 로드맵

> **작성일**: 2026-02-03
> **목표**: 3개월 내 MVP 출시

---

## 현재 상태 (2026-02-03)

### ✅ 완료
- Next.js 16 + TypeScript 프로젝트 초기화
- Drizzle ORM + Supabase 연동
- NextAuth.js v5 카카오 로그인
- 랜딩 페이지 3개 버전 (A/B/C 테스트)
- Admin 대시보드 UI (디자인 개선 완료)

### ❌ 미완성 (MVP 필수)
- 청첩장 템플릿 (0/5개)
- 청첩장 생성/조회 기능
- RSVP 기능
- AI 사진 생성
- 결제 시스템
- 드래그 앤 드롭 편집기

---

## 🎯 Phase 1: 핵심 기능 (2주)

> **목표**: 청첩장 만들기 → 보기 → 응답받기 E2E 완성

### Week 1: 청첩장 생성 & 조회

#### 1-1. 청첩장 템플릿 프로토타입 (1일)
**우선순위**: ⭐⭐⭐ 최우선

- [ ] **1개 템플릿만 먼저 구현** (클래식 스타일)
  - 모바일 우선 디자인
  - 필수 섹션: 커버, 인사말, 일시/장소, 갤러리, 지도, 계좌번호
  - 컴포넌트 위치: `components/templates/ClassicTemplate.tsx`
- [ ] 템플릿 미리보기 페이지 `/templates/preview`
- [ ] 템플릿 선택 UI (나중에 5개로 확장)

**산출물:**
- 1개 완성된 템플릿
- 템플릿 구조 확립 (나머지 4개 템플릿 베이스)

---

#### 1-2. 청첩장 생성 기능 (2일)
**우선순위**: ⭐⭐⭐

- [ ] **DB 스키마 확장**
  - `invitations` 테이블 (id, userId, templateId, content JSON)
  - `db/schema.ts` 수정
  - Drizzle migration 실행

- [ ] **청첩장 생성 폼** (`/admin/invitations/new`)
  - 템플릿 선택
  - 기본 정보 입력:
    - 신랑/신부 이름
    - 예식 날짜/시간
    - 장소 (주소, 홀 이름)
    - 연락처
  - 실시간 미리보기 (옆에 템플릿 렌더링)

- [ ] **API 엔드포인트**
  - `POST /api/invitations` - 청첩장 생성
  - `GET /api/invitations/:id` - 청첩장 조회
  - `PATCH /api/invitations/:id` - 청첩장 수정

- [ ] **Admin 대시보드 연동**
  - "첫 청첩장 만들기" 버튼 활성화
  - 내 청첩장 목록 표시

**산출물:**
- 청첩장 생성부터 저장까지 E2E 완성
- Admin에서 내 청첩장 확인 가능

---

#### 1-3. 청첩장 조회 페이지 (1일)
**우선순위**: ⭐⭐⭐

- [ ] **공개 청첩장 페이지** (`/inv/[id]`)
  - nanoid로 암호화된 URL
  - 템플릿 렌더링 (DB에서 content 가져오기)
  - 모바일 최적화 (90%+ 모바일 트래픽)
  - 부드러운 스크롤 애니메이션

- [ ] **공유 기능**
  - 카카오톡 공유 버튼 (Open Graph 메타태그)
  - URL 복사 버튼
  - QR 코드 생성 (나중에)

- [ ] **조회수 트래킹**
  - 페이지 로드 시 조회수 증가
  - Admin 통계에 반영

**산출물:**
- `/inv/abc123` 형태로 청첩장 공유 가능
- 카카오톡으로 바로 공유 가능

---

### Week 2: RSVP & 통계

#### 2-1. RSVP 기능 (2일)
**우선순위**: ⭐⭐⭐

- [ ] **DB 스키마**
  - `rsvps` 테이블 (id, invitationId, name, phone, attendance, guestCount, message)

- [ ] **RSVP 폼** (청첩장 하단)
  - 이름, 연락처 (선택)
  - 참석 여부 (참석 / 불참 / 미정)
  - 동행 인원수
  - 축하 메시지

- [ ] **API 엔드포인트**
  - `POST /api/rsvp` - RSVP 제출
  - `GET /api/invitations/:id/rsvps` - RSVP 목록 (admin only)

- [ ] **Admin RSVP 관리**
  - RSVP 응답 목록
  - 참석률 통계 (참석 X명 / 불참 Y명 / 미정 Z명)
  - 예상 인원수 계산 (참석자 + 동행 인원)
  - 엑셀 다운로드

**산출물:**
- 하객이 청첩장에서 바로 참석 여부 응답 가능
- Admin에서 실시간 통계 확인

---

#### 2-2. 통계 대시보드 (1일)
**우선순위**: ⭐⭐

- [ ] **Admin 대시보드 데이터 연동**
  - Stats cards에 실제 데이터 표시:
    - 내 청첩장 개수
    - 총 조회수
    - RSVP 응답 수
  - Count-up 애니메이션으로 표시

- [ ] **청첩장 상세 통계**
  - 일별 조회수 그래프
  - 참석률 원형 차트
  - 최근 RSVP 응답 목록 (Recent Activity)

**산출물:**
- 의미 있는 통계 데이터 표시
- 사용자 engagement 확인 가능

---

## 🎯 Phase 2: 템플릿 확장 & 편집기 (1주)

### 2-1. 나머지 템플릿 4개 (2일)
**우선순위**: ⭐⭐

- [ ] 모던 템플릿 (미니멀, 대담한 타이포)
- [ ] 빈티지 템플릿 (복고풍, 따뜻한 색감)
- [ ] 플로럴 템플릿 (꽃무늬, 파스텔)
- [ ] 미니멀 템플릿 (흑백, 여백 강조)

각 템플릿마다:
- 독자적 디자인 (오픈소스 복사 X)
- 모바일 최적화
- 동일한 데이터 구조 사용

---

### 2-2. 간단한 편집기 (3일)
**우선순위**: ⭐

- [ ] **텍스트 편집**
  - 인사말, 안내사항 텍스트 수정
  - WYSIWYG 에디터 (Tiptap or Slate)

- [ ] **이미지 업로드**
  - 커버 이미지
  - 갤러리 이미지 (최대 20장, 무료 플랜)
  - Cloudflare R2 연동

- [ ] **기본 커스터마이징**
  - 템플릿 색상 변경 (2-3가지 프리셋)
  - 폰트 변경 (3-4가지)
  - 섹션 on/off

**드래그 앤 드롭은 나중에** (dnd-kit, 복잡함)

---

## 🎯 Phase 3: AI 사진 생성 (1주)

### 3-1. Replicate API 연동 (2일)
**우선순위**: ⭐⭐ (차별화 포인트)

- [ ] **Replicate 계정 & API 키**
  - Flux 모델 선택
  - 비용 테스트 ($0.04/이미지)

- [ ] **얼굴 감지**
  - Azure Face API 연동 (무료 티어)
  - 증명 사진 업로드 → 얼굴 감지

- [ ] **AI 생성 파이프라인**
  - 스타일 선택 (클래식/모던/빈티지)
  - 배치 생성 (4장)
  - 생성 진행 상태 표시
  - 결과 이미지 S3/R2 저장

- [ ] **API 엔드포인트**
  - `POST /api/ai/generate` - AI 생성 요청
  - `GET /api/ai/status/:id` - 진행 상태 확인

---

### 3-2. AI 크레딧 시스템 (1일)
**우선순위**: ⭐⭐

- [ ] **크레딧 관리**
  - 무료 플랜: 2회
  - 프리미엄 플랜: 10회
  - 추가 구매: 1,000원/회

- [ ] **DB 스키마**
  - `ai_generations` 테이블 (userId, originalUrl, generatedUrls, style, cost)
  - `users.aiCredits` 필드 추가

- [ ] **크레딧 차감 로직**
  - 생성 전 크레딧 확인
  - 생성 후 차감
  - 부족 시 구매 유도

- [ ] **Admin UI 연동**
  - Sidebar에 실시간 크레딧 표시
  - 크레딧 구매 버튼

---

### 3-3. AI 사진 적용 (1일)
**우선순위**: ⭐⭐

- [ ] **생성 결과 선택**
  - 4장 중 1장 선택
  - 재생성 버튼 (크레딧 추가 차감)

- [ ] **청첩장에 적용**
  - 선택한 이미지를 커버로 설정
  - 편집기에서 언제든 변경 가능

---

## 🎯 Phase 4: 결제 & 출시 준비 (1주)

### 4-1. Toss Payments 연동 (2일)
**우선순위**: ⭐⭐⭐

- [ ] **결제 상품**
  - 프리미엄 플랜: 9,900원 (일회성)
  - AI 크레딧: 1,000원/회, 8,000원/10회

- [ ] **결제 플로우**
  - 결제 요청 → Toss 승인 → DB 업데이트
  - Webhook으로 결제 완료 처리

- [ ] **구매 후 처리**
  - 프리미엄 플랜: `users.isPremium = true`
  - AI 크레딧: `users.aiCredits += N`

---

### 4-2. 보안 & 성능 (2일)
**우선순위**: ⭐⭐⭐

- [ ] **보안**
  - nanoid URL 암호화 (이미 적용)
  - Rate limiting (Upstash Redis)
  - HTTPS 강제 (Vercel 자동)
  - 민감 정보 로깅 금지

- [ ] **성능 최적화**
  - 이미지 최적화 (Next.js Image, WebP)
  - Lazy loading
  - Lighthouse 점수 90+ (모바일)

- [ ] **데이터 정책**
  - 결혼식 후 90일 자동 삭제
  - 삭제 전 알림 (이메일)

---

### 4-3. 베타 테스트 (1일)
**우선순위**: ⭐⭐

- [ ] **테스트 시나리오**
  - E2E: 청첩장 생성 → 공유 → RSVP → 통계 확인
  - AI 생성: 이미지 업로드 → 4장 생성 → 선택
  - 결제: 프리미엄 구매 → 크레딧 충전

- [ ] **베타 테스터 초대**
  - 50명 (친구, 가족, 온라인 커뮤니티)
  - 피드백 수집 (Google Form)

- [ ] **버그 수정**

---

## 📊 우선순위 요약

### 🔥 지금 당장 (이번 주)
1. ⭐⭐⭐ 청첩장 템플릿 1개 (클래식)
2. ⭐⭐⭐ 청첩장 생성 기능
3. ⭐⭐⭐ 청첩장 조회 페이지 (/inv/[id])
4. ⭐⭐⭐ RSVP 기능

### 🚀 다음 주
5. ⭐⭐ 나머지 템플릿 4개
6. ⭐⭐ AI 사진 생성
7. ⭐⭐ 결제 시스템

### 💎 나중에 (있으면 좋음)
- 드래그 앤 드롭 편집기 (복잡)
- Admin Phase 2 (Quick Actions, Recent Activity, Mobile)
- 카카오톡 알림톡
- 축의금 송금 버튼

---

## 🎯 이번 주 목표

**목표**: 청첩장 만들기 → 보기 → 응답받기 E2E 완성

### Day 1: 템플릿 프로토타입
- [ ] ClassicTemplate.tsx 구현
- [ ] 템플릿 미리보기 페이지

### Day 2: 청첩장 생성 (1)
- [ ] DB 스키마 확장
- [ ] 생성 폼 UI

### Day 3: 청첩장 생성 (2)
- [ ] API 엔드포인트
- [ ] Admin 연동

### Day 4: 청첩장 조회
- [ ] /inv/[id] 페이지
- [ ] 카카오톡 공유

### Day 5: RSVP (1)
- [ ] DB 스키마
- [ ] RSVP 폼 UI

### Day 6: RSVP (2)
- [ ] API 엔드포인트
- [ ] Admin 통계

### Day 7: 정리 & 테스트
- [ ] E2E 테스트
- [ ] 버그 수정
- [ ] 문서 정리

---

## 다음 단계

**지금 시작할 것:**
1. 청첩장 템플릿 1개 만들기 (ClassicTemplate.tsx)

준비됐으면 말해줘!
