# 2026-02-10 작업 6관점 냉정 평가

> 오늘 생성된 설계 문서 12개 + 커밋 23개를 PM, 프론트엔드 개발자, 백엔드 개발자, DBA, 기획자, 사장 6개 역할로 동시 리뷰

---

## 스코어보드

| 역할 | 점수 | 핵심 한 문장 |
|------|------|-------------|
| **PM** | 4/10 | 돈을 받을 수 없는 제품의 폰트 다양성을 늘리고 있었다 |
| **프론트엔드** | 5.5/10 | 하루에 기능 12개를 쌓는 속도는 인상적이지만, 절반은 내일의 리팩터링 대상 |
| **백엔드** | 위험도 7/10 | 돈을 잃고, 데이터를 잃고, 깨진 청첩장이 공유되는 삼중 사고 구조 |
| **DBA** | 5.5/10 | 돈이 걸린 크레딧 차감이 race condition에 노출된 채 결혼 시즌을 맞으면, 기술 부채가 아니라 금전 손실 |
| **기획자** | 5.5/10 | 분석은 충분히 했고, 이제 그만 생각하고 결제-공개뷰-RSVP-카톡공유를 코드로 치는 18일이 남았다 |
| **사장** | 4/10 | "완벽한 청첩장 플랫폼"을 만들다 시즌을 놓치면, "아무도 안 쓴 예쁜 사이드 프로젝트"가 된다 |

**종합 평균: 4.8/10**

---

## 6명이 공통으로 지적한 것 (전원 일치)

### 1. 결제가 Phase 3이면 사업이 아니라 데모

- **PM**: "매출 $0인데 AI 폰트 다양성?"
- **사장**: "결제는 Phase 0이어야 해. 봄 시즌 수요 피크는 2~4월 주문인데 결제가 5월에 붙으면 절반 지남"
- **기획자**: "식당 열었는데 계산대 없이 메뉴판 글씨체 늘린 격"

### 2. AI 테마 고도화에 시간 과투자

- 오늘 커밋의 체감 30~40%가 AI 테마 (멀티모델, 빠른/정밀, 레이아웃 다양성, 웹폰트)
- **사장**: "Gemini Flash $0.002면 그걸로 충분. 정밀 모드는 유저가 요구할 때 추가해도 늦지 않아"
- **PM**: "이미 있는 기능을 polish하는 작업. 기본 루프가 없으면 제품이 아니다"

### 3. 설계 문서 12개 = 분석 마비(Analysis Paralysis)

- 모바일 에디터만 5개 문서, 같은 결론을 3가지 프레임워크로 반복
- **사장**: "설계 문서는 되돌리기 비싼 결정에만. 나머지는 코드로"
- **PM**: "MVP 3주 전에 12페이지 분석서가 아니라 1줄 결정이 필요"

### 4. 온보딩 위자드 삽질 (만들고 같은 날 제거)

- **기획자**: "교과서적 안티패턴. 기획 검증 없이 구현한 결과"
- **PM**: "5분만 생각했으면 안 만들었을 것"
- **사장**: "그 2~4시간에 Toss 결제 테스트 한 건 찍었으면..."

---

## 역할별 상세 리뷰

---

### PM (4/10)

#### 생산성과 방향성 — 스코프 제어 실패

하루에 커밋 23개는 "많이 했다"가 아니라 "너무 많은 방향으로 흔들렸다"는 증거.

오늘 터치한 영역: AI 테마 생성, 에디터 온보딩, 모바일 에디터, PostHog, 보안 수정, DB 커넥션, 자동저장, 발행 검증, 공유 모달, 바이럴 CTA — **10개 이상의 서로 다른 관심사.** 1인 개발자가 하루에 집중해야 하는 영역은 최대 2-3개.

#### 문서 12개 + 커밋 23개

문서가 너무 많다. "4관점 리뷰", "3관점 리뷰", "다중 역할 시뮬레이션" 같은 문서는 과잉 분석(analysis paralysis). MVP 런칭 3주 남은 시점에서 필요한 건 "이거 한다 / 안 한다" 결정 1줄이지 12페이지짜리 분석서가 아님.

#### AI 테마 다양성 — MVP에서 틀린 투자

커밋 5개 + 설계 문서 3개를 AI 테마에 소비. 현실: 결제 없음, RSVP 없음. AI 테마의 다양성은 "이미 있는 기능을 polish하는 작업". MVP에서 중요한 건 "사용자가 청첩장을 만들고 → 공유하고 → 돈을 내는 루프가 동작하느냐".

#### 3월 초 런칭 가능성

아직 없는 것: Toss 결제(3-5일), RSVP(2-3일), 추가 템플릿(3-5일), QA(3-5일), 랜딩 페이지(2-3일) = **최소 14-22 작업일**. 빠듯하지만 불가능하지는 않다. **단, 오늘 같은 하루를 반복하면 100% 실패.**

#### 놓치고 있는 리스크

1. 결제 없이 런칭하면 무료→유료 전환 극히 어려움
2. 실제 사용자 테스트 0회
3. 경쟁사 대비 템플릿 수 부족 (바른손 100+ vs 6)
4. SEO/마케팅 준비 없음
5. 에러 모니터링(Sentry) 없음

---

### 프론트엔드 개발자 (5.5/10)

#### UA 기반 라우트 분리

- UA 감지는 본질적으로 불안정. iPad+키보드, 태블릿 가로모드 등 엣지케이스 폭발
- 768~1024px 갭 존재 → 태블릿 사용자 리다이렉트 루프 가능
- 같은 콘텐츠 두 URL → canonical 설정 안 하면 크롤러 혼란
- 장기적으로 CSS Container Query + 단일 라우트가 맞음. 명시적 기술 부채 등록 필요

#### 온보딩 위자드 잔해

- `BUILTIN_TEMPLATES` 배열과 `TemplateMiniPreview` 컴포넌트가 export로 남아있음 — 위자드 제거 후 dead code
- 같은 날 250줄 작성→제거는 설계 검증 없이 코딩부터 시작했다는 증거

#### tailwind-color-map.ts 242 엔트리

틀린 접근. Tailwind v4는 CSS 변수 기반. `tailwindcss/colors`에서 import하거나 CSS custom property를 읽으면 됨. 242개 하드코딩은 버전 업데이트 시 동기화 깨짐. 테마 데이터에 hex 값을 직접 저장하는 게 올바른 접근.

#### 모바일 에디터 설계 문서 5개, 결론 0개

5개 문서가 같은 질문("모바일에서 에디터를 어떻게 보여줄 것인가")에 5가지 방향 제시. 어느 것도 "이걸 최종 결정으로 한다"는 ADR 형태가 아님. 혼자 운영하는 프로젝트에서 설계 문서 5개는 과잉이고, 결론 문서 0개는 부족.

#### TemplateTab.tsx 659줄

3개 섹션(AI 생성, 빌트인 템플릿, 테마 라이브러리)이 하나의 컴포넌트. `ThemeColorStrip`, `ThemeCard` 인라인 추가로 더 비대해짐. AI 기능 추가되면 800줄, 1000줄로 갈 것이 뻔함. 분리 필요.

#### 오늘 쌓인 기술 부채

| # | 부채 | 심각도 |
|---|------|--------|
| 1 | UA 기반 라우트 분리 — 태블릿 갭, 리다이렉트 루프 | 높음 |
| 2 | tailwind-color-map.ts 242개 하드코딩 | 중간 |
| 3 | TemplateTab.tsx 659줄 갓 컴포넌트 | 높음 |
| 4 | 설계 문서 5개, 결론 0개 | 중간 |
| 5 | 위자드 잔해 (dead code export) | 낮음 |
| 6 | PostHog 이벤트 설계 문서 부재 | 중간 |
| 7 | 웹폰트 4종 로딩 성능 미측정 | 중간 |
| 8 | 발행 검증 서버사이드 미확인 | 높음 |

---

### 백엔드 개발자 (위험도 7/10)

#### 1. Credentials 제거 — 인증 표면 (4/10)

- `authorized` 콜백이 `!!auth`만 체크. 관리자/일반 유저 권한 분리 없음
- 카카오 토큰 갱신 로직 없음 — access_token 만료 시 세션은 살아있지만 카카오 API 호출 불가
- 가장 큰 구멍은 막았지만 세션 관리 느슨

#### 2. DB 커넥션 max=3 (6/10)

- Vercel에서 동시 10개 function × max 3 = 30 커넥션 → Pooler 200개 기준 당장은 OK
- `connectionTimeoutMillis` 미설정 → 기본값 0(무한 대기) → 풀 고갈 시 요청 영원히 매달림
- AI 생성 동시 요청 3건이면 DB insert 시점에서 풀 고갈 가능

#### 3. extendedData 1-depth merge (8/10 — 가장 위험)

```javascript
// 현재 패턴
const merged = { ...existing.extendedData, ...incoming.extendedData };
```

gallery 객체 전체가 교체되면서 하위 속성 소실. **이미 2-depth 구조를 쓰고 있는데 1-depth merge**. 자동저장 + 1-depth merge + 2-depth 데이터 = 데이터 유실의 완벽한 조건. "아직 안 터진 게 운이 좋은 것."

#### 4. 크레딧 차감 비트랜잭션 (7/10)

```
1. SELECT credits (5개)
2. 탭 2개에서 동시 요청 → 둘 다 5개로 읽음
3. 외부 API 2번 호출 (비용 2번 발생)
4. UPDATE credits = 4 (1번만 차감)
```

Classic read-then-write race condition. `SET freeCredits = freeCredits - 1 WHERE freeCredits > 0` 같은 atomic update가 아님.

#### 5. AI 멀티모델 — 타임아웃/fallback 없음 (6/10)

- 3개 프로바이더 모두 타임아웃 미설정. Anthropic 30초 hang → Vercel 함수도 30초 매달림
- fallback 없음 — 프로바이더 다운 시 그냥 500
- 비용 cap 없음 — 실수로 Claude Opus를 fast 모드에 넣으면 요청당 $0.50+

#### 6. PostHog PII 해외 전송 (5/10)

- `posthog.identify()`에 email과 name 직접 전송 → 미국 서버
- 한국 개인정보보호법(PIPA) 상 해외 이전 동의 없이 전송은 위반 가능
- 서버사이드 클라이언트 `shutdown()` 미호출 → 이벤트 유실

#### 7. 발행 API 서버 검증 부재 (7/10)

API에서 status를 `published`로 바꿀 뿐 필드 검증 없음. curl로 빈 청첩장 발행 가능 → "undefined님과 undefined님의 결혼식" 카카오톡 공유.

#### 위험도 종합

| # | 항목 | 위험도 | 시급성 |
|---|------|--------|--------|
| 1 | extendedData 1-depth merge | **8/10** | **즉시** |
| 2 | 크레딧 차감 race condition | **7/10** | **즉시** |
| 3 | 발행 서버 검증 부재 | **7/10** | **즉시** |
| 4 | AI 타임아웃/fallback 부재 | 6/10 | 출시 전 |
| 5 | DB 커넥션 타임아웃 미설정 | 6/10 | 결혼 시즌 전 |
| 6 | PostHog PII 해외 전송 | 5/10 | 출시 전 |
| 7 | 인증 표면 느슨 | 4/10 | 낮음 |

---

### DBA (5.5/10)

#### extendedData JSONB 남용

flat 컬럼(검색/필터용) + JSONB(프레젠테이션 데이터) 분리 기준 자체는 합리적. 그러나:

- RSVP 설정은 flat 컬럼으로 승격 필요 (마감일 쿼리 등)
- 갤러리 이미지 배열이 커지면 JSONB 하나가 수백 KB → 자동저장마다 전체 읽기-쓰기
- safeParse 실패 시 빈 객체로 대체 → 전체 유실. 기존 데이터 보존 + 400 반환 필수

#### 크레딧 차감 — DB 레벨 해결책

**즉시 적용 (방법 1: Atomic UPDATE):**
```sql
UPDATE users SET credits = credits - 1
WHERE id = $1 AND credits > 0
RETURNING credits;
```
외부 API 호출 전에 먼저 차감 → 실패 시 +1 롤백. 30분이면 끝남.

**중기 (방법 3: credit_transactions 테이블):**
감사 추적 완벽. INSERT만 하니까 race condition 구조적 불가능. 결제 연동 시점에 도입.

#### max=3 + Supabase Pooler

조합 자체는 올바름. 서버리스에서 앱 레벨 max를 낮게 잡아야 Pooler가 제대로 작동. 다만 Pooler가 transaction mode인지 session mode인지 확인 필요 (transaction mode면 prepared statement 사용 불가).

#### appSettings를 설정 저장소로 쓰는 패턴

설정 5개 미만이면 괜찮음. 단, Zod 스키마 검증 + 코드 레벨 기본값(fallback) + Redis 캐시(TTL 1시간) 필수.

#### 결혼 시즌 대비 필수 조치

1. 크레딧 차감 atomic update (30분)
2. extendedData safeParse 실패 방어 (30분)
3. 주요 쿼리 EXPLAIN ANALYZE + 인덱스 점검
4. 공개 청첩장 CDN + Redis 캐싱 (카톡 공유 시 수백 명 동시 접근)

---

### 기획자 (5.5/10)

#### 분석/리뷰 작업의 가치

44건→20건 정리는 좋았음. 문제는 하루에 3개의 다중역할 분석(3관점, 5관점, 4관점)을 돌린 것. 결과물이 겹침. 하나의 프레임워크로 한 번 깊게 하고 바로 구현으로 넘어갔어야 함.

#### 사용자 여정 분석에서 빠진 것

1. **결제 터치포인트 미정의** — 발행 전? 편집 중? 프리미엄 선택 시? 이게 없으면 결제 UX가 찢어짐
2. **재방문/수정 루프 없음** — 청첩장은 한 번에 안 끝남. "저장 → 며칠 뒤 수정 → 또 수정 → 발행"
3. **하객 관점 여정이 너무 가벼움** — 계좌번호 복사, 지도 연동 등 실제 사용 품질 미분석
4. **전환율 기준치 없음** — PostHog 넣었으면서 뭘 측정할지 미정의

#### 경쟁사 대비 포지셔닝

"바른손보다 적은 기능, 하지만 AI가 만들어주는 유일한 청첩장" — 이 포지셔닝이 성립하려면 나머지 기본 기능은 깨지지 않고 작동해야 함.

#### 3월 런칭 MFS (Minimum Feasible Service)

| # | Must-Have | 예상 일수 |
|---|-----------|----------|
| 1 | 공개 청첩장 뷰 (`inv/[id]/`) | 3일 |
| 2 | 카카오톡 공유 (OG + SDK) | 2일 |
| 3 | Toss 결제 (기본 단건) | 3일 |
| 4 | RSVP 기본 폼 (참석+인원) | 2일 |
| 5 | 모바일 공개 뷰 최적화 | 2일 |
| | **합계** | **12일** |

절대 지금 하지 말 것: AI 모델 분리, 모바일 에디터 고도화, 다크모드, BGM, NestJS

---

### 사장 (4/10)

#### 시장 타이밍

- 봄 결혼 시즌 예식 피크: 4~6월
- 청첩장 주문 피크: 예식 4~8주 전 = **2~4월**
- 결제 없이 3월 런칭 = 잡을 수 있는 것도 못 잡음
- 이 시즌 놓으면 다음은 9월. 6개월 매출 0으로 버텨야 함

#### 오늘의 시간 배분 문제

| 작업 | 매출 기여도 |
|------|-----------|
| 보안 수정, DB 안정화 | 필수. 잘했음 |
| 공유 모달, 바이럴 CTA | **높음** |
| 발행 검증, 자동저장 | 중간 |
| PostHog | 중간 (나중에 가치) |
| AI 테마 멀티모델/다양성/폰트 | **낮음** |
| 온보딩 위자드 삽질 | **0** |

#### 생존 전략

**이번 주 (2/10~16):**
1. Toss 결제 연동 — 1순위
2. 카카오톡 공유 마무리
3. 설계 문서 작성 금지

**다음 주 (2/17~23):**
4. RSVP 기본 폼
5. 랜딩 페이지
6. 모바일 QA

**런칭 주 (2/24~3/2):**
7. 버그 수정 + 안정화
8. 지인 10명 무료 테스트
9. 최소한의 마케팅 노출

#### 수익 모델 조정 제안

- 무료 청첩장 1장 (AI 테마 2회 포함) → 전환 유도
- 프리미엄 ₩9,900: 무제한 AI 테마 + 프리미엄 기능 → 주력 매출원
- 첫 달 목표: 유료 전환 10건 = ₩99,000 (PMF 신호 확인용)

---

## 전원 합의: 즉시 액션

### 이번 주 반드시

| 순위 | 액션 | 기간 |
|------|------|------|
| 1 | **Toss 결제 연동** | 3~5일 |
| 2 | **RSVP 하객 폼** (참석+인원) | 1~2일 |
| 3 | **카카오톡 공유 마무리** | 1일 |
| 4 | **크레딧 차감 atomic update** | 30분 |
| 5 | **발행 API 서버 검증 추가** | 1일 |

### 당분간 금지

- AI 테마 관련 어떤 작업이든
- 새로운 설계 문서 작성
- 모바일 에디터 추가 개선
- 폰트/템플릿 추가

---

## 잘한 것 (2명 이상 인정)

- 보안 수정 (Credentials 제거) — 전원
- 발행 검증, 자동저장 에러 알림 — 실질적 UX 개선
- 공유 모달 + 바이럴 CTA — 그로스 관점 올바름
- 백로그 44건→20건 정리 — 방향 정리 기여
- PostHog 통합 — 데이터 기반 의사결정 기반 마련
